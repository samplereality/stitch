<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Glitch-lite Editor</title>
    <link rel="stylesheet" href="assets/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/theme/material-darker.css"
    />
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <div class="brand-mark"></div>
          <div class="brand-text">
            <span class="brand-title">Glitch-lite</span>
            <span class="brand-subtitle">Local-first creative coding</span>
          </div>
        </div>
        <div class="actions">
          <button id="newProjectBtn" class="btn">New Project</button>
          <button id="importZipBtn" class="btn">Import ZIP</button>
          <button id="exportZipBtn" class="btn">Export ZIP</button>
          <button id="publishBtn" class="btn btn-primary">Publish</button>
        </div>
      </header>

      <main class="workspace" id="workspace">
        <aside class="panel file-panel">
          <div class="panel-header">
            <span>Files</span>
            <div class="panel-actions">
              <button id="toggleFilePanelBtn" class="icon-btn" title="Collapse files">⟨</button>
              <button id="addFileBtn" class="icon-btn" title="Add file">+</button>
              <button id="uploadFileBtn" class="icon-btn" title="Upload files">⬆</button>
            </div>
          </div>
          <div id="fileTree" class="file-tree"></div>
        </aside>

        <button id="expandFilePanelBtn" class="collapse-tab hidden" title="Show files">
          Files ▸
        </button>

        <section class="panel editor-panel">
          <div class="panel-header">
            <span id="currentFileLabel">Select a file</span>
            <div class="panel-actions">
              <span id="saveStatus" class="status">Idle</span>
            </div>
          </div>
          <div class="editor-wrap">
            <textarea id="editor" class="editor" spellcheck="false"></textarea>
            <div id="binaryNotice" class="binary-notice hidden">
              This file is binary. Preview it in the right panel or replace it.
            </div>
          </div>
        </section>

        <div class="splitter" id="editorPreviewSplitter" role="separator" aria-label="Resize editor"></div>

        <section class="panel preview-panel">
          <div class="panel-header">
            <span>Preview</span>
            <div class="panel-actions">
              <button id="refreshPreviewBtn" class="icon-btn" title="Refresh preview">⟳</button>
            </div>
          </div>
          <div class="preview-wrap">
            <iframe
              id="previewFrame"
              sandbox="allow-scripts allow-same-origin"
              title="Project Preview"
            ></iframe>
          </div>
          <div id="previewWarnings" class="warnings"></div>
        </section>
      </main>
    </div>

    <input id="zipInput" type="file" accept=".zip" class="hidden" />
    <input id="fileInput" type="file" multiple class="hidden" />

    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/xml/xml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/javascript/javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/css/css.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/htmlmixed/htmlmixed.js"></script>
    <script src="assets/app.js"></script>
  </body>
</html>
